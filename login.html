<!-- login.html -->
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Login — River Quest</title>
<style>
  :root{
    --bg:#0b0b16; --panel:rgba(0,0,0,0.7); --accent:#7be3ff; --accent2:#ffb86b;
    --neon: 0 0 12px rgba(123,227,255,0.15), 0 0 30px rgba(255,184,107,0.04);
  }
  body{margin:0;height:100vh;background:linear-gradient(180deg,#041022 0%, #0b0b16 100%); display:flex; align-items:center; justify-content:center; font-family:system-ui,Segoe UI,Roboto,Arial;}
  .card{width:420px; background:var(--panel); border-radius:16px; padding:28px; box-shadow:var(--neon); color:#fff; text-align:center;}
  h1{margin:0 0 8px; font-size:1.6rem; letter-spacing:1px;}
  .subtitle{color:#cfd8dc;margin-bottom:16px;}
  input{width:100%; padding:12px 14px; border-radius:10px; border:2px solid rgba(255,255,255,0.06); margin-bottom:12px; background:rgba(255,255,255,0.02); color:#fff; font-size:1rem;}
  button{padding:10px 14px; border-radius:10px; border:none; cursor:pointer; font-weight:600; background:linear-gradient(90deg,var(--accent),var(--accent2)); color:#02111a; width:100%;}
  .row{display:flex; gap:8px;}
  .small{font-size:.9rem;color:#a9b4bb;margin-top:12px;}
  .link{cursor:pointer;color:var(--accent); text-decoration:underline;}
  .error{color:#ff8080;margin-top:8px;}
</style>
</head>
<body>
  <div class="card">
    <h1>River Quest</h1>
    <div class="subtitle">Login or create a free student account</div>

    <input id="username" placeholder="Username (letters & numbers)" />
    <input id="password" type="password" placeholder="Password" />

    <div class="row">
      <button id="loginBtn">Login</button>
      <button id="registerBtn" style="background:transparent;border:2px solid rgba(255,255,255,0.08);color:#fff;width:48%;">Register</button>
    </div>

    <div class="small">
      By default your progress is stored on this device. <span class="link" id="guestLink">Play as Guest</span>
    </div>
    <div id="msg" class="error"></div>
  </div>

<script>
  // VERY simple client-side "auth". For demos only.
  const $ = id => document.getElementById(id);
  function getUsers(){ return JSON.parse(localStorage.getItem('rq_users')||'{}'); }
  function saveUsers(u){ localStorage.setItem('rq_users', JSON.stringify(u)); }

  $('loginBtn').addEventListener('click', ()=>{
    const name = $('username').value.trim();
    const pass = $('password').value;
    const users = getUsers();
    if(!name || !pass){ $('msg').textContent='Enter username & password'; return; }
    if(!users[name] || users[name].password !== pass){
      $('msg').textContent = 'Wrong username or password';
      return;
    }
    // login success
    localStorage.setItem('rq_current', JSON.stringify({ username: name }));
    window.location.href = 'dashboard.html';
  });

  $('registerBtn').addEventListener('click', ()=>{
    const name = $('username').value.trim();
    const pass = $('password').value;
    if(!/^[a-z0-9_-]{3,16}$/i.test(name)){ $('msg').textContent='Username must be 3–16 letters/numbers'; return; }
    if(pass.length < 4){ $('msg').textContent='Password too short'; return; }
    const users = getUsers();
    if(users[name]){ $('msg').textContent='Username already exists'; return; }
    users[name] = { password: pass, progress: { level: 1, score: 0, completedQuizzes: 0 } };
    saveUsers(users);
    localStorage.setItem('rq_current', JSON.stringify({ username: name }));
    window.location.href = 'dashboard.html';
  });

  $('guestLink').addEventListener('click', ()=>{
    localStorage.setItem('rq_current', JSON.stringify({ username: 'Guest_' + Date.now() }));
    window.location.href = 'dashboard.html';
  });

  // quick demo account helper (optional)
  if(!Object.keys(getUsers()).length){
    // create sample user for testing
    const u = getUsers(); u['student1'] = { password:'pass', progress:{ level:1, score:0, completedQuizzes:0 } }; saveUsers(u);
  }
</script>
</body>
</html>
